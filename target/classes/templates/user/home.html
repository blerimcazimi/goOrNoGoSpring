

<link href="/themify-icons.css" rel="stylesheet" media="screen"/>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" media="screen"/>

<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

<script src="https://hammerjs.github.io/dist/hammer.min.js"></script>

<style>
    body
    {
        font-family: 'Roboto', sans-serif;
        padding: 0px;
        background-color: #F5F7FA;
    }

    .list-group-item
    {
        border-radius: 0px !important;
        border-right: none !important;

        -webkit-transition:all ease 0.2s;
        cursor: pointer;
        padding-left: 30px;


    }

    .list-group-item.active
    {
        border-left: none !important;
        border-bottom: none !important;
        border-top: none !important;
    }

    .list-group-item .t
    {
        margin-left: 25px;
        -webkit-transition:all ease 0.35s;
    }

    .list-group-item .ti
    {

    }

    .list-group-item:hover .t
    {
        margin-left: 50px;
    }

    .list-group-item:first-child
    {
        border-top: none !important;
    }

    .list-group-item:hover
    {
        background-color: #2ECC71 !important;
        color: #fff !important;
    }

    div.menu .header
    {

        background-color: green;
        height: 73px;
        padding-top: 17px;
        color: #ffffff;
        font-size: 22px;

        background-image: linear-gradient(to right top, #2ecc71, #2cc46d, #2abd68, #29b564, #27ae60);

        box-shadow: 0 1px 8px 0 rgba(0,17,25,.27);
        padding-left: 25px;

    }


    div.menu .content
    {
        height: 100vh;
        width: 100%;
        background-color: #fff;
        box-shadow: 0 1px 8px 0 rgba(0,17,25,.27);
    }

    .tinder {
       // width: 100vw;
        height: 85vh;
        display: flex;
        flex-direction: column;
        position: relative;
        opacity: 0;
        transition: opacity 0.1s ease-in-out;
        margin-left: -90px;
    }

    #love
    {
        right: 0px;
        margin-left: 80px;
    }

    .loaded.tinder {
        opacity: 1;
    }

    .tinder--status {
        position: absolute;
        top: 50%;
        margin-top: -30px;
        z-index: 2;
        width: 100%;
        text-align: center;
        pointer-events: none;
    }

    .tinder--status i {
        font-size: 100px;
        opacity: 0;
        transform: scale(0.3);
        transition: all 0.2s ease-in-out;
        position: absolute;
        width: 100px;
        margin-left: -50px;
    }


    .tinder--cards {
        flex-grow: 1;
        text-align: center;
        display: flex;
        align-items: flex-end;
        z-index: 1;
    }

    .tinder--card img
    {
        max-height: 300px !important;
        width: 100% !important;
    }

    .tinder--card {
        display: inline-block;
        width: 70vw;
        max-width: 400px;
        height: 60vh;
        background: #FFFFFF;
        padding-bottom: 0px;
        border-radius: 8px;
        overflow: hidden;
        position: absolute;
        will-change: transform;
        transition: all 0.3s ease-in-out;
        cursor: -webkit-grab;
        cursor: -moz-grab;
        cursor: grab;

    }

    .moving.tinder--card {
        transition: none;
        cursor: -webkit-grabbing;
        cursor: -moz-grabbing;
        cursor: grabbing;
    }

    .tinder--card img {
        max-width: 100%;
        pointer-events: none;
    }

    .tinder--card h3 {
        margin-top: 32px;
        font-size: 32px;
        padding: 0 16px;
        pointer-events: none;
    }

    .tinder--card p {
        margin-top: 24px;
        font-size: 20px;
        padding: 0 16px;
        pointer-events: none;
    }

    .tinder--buttons {
        flex: 0 0 100px;
        padding-top: 20px;

    }

    .tinder--buttons button {
        border-radius: 50%;
        line-height: 80px;
        width: 76px;
        border: 0;
        background: #FFFFFF;
        display: inline-block;
        margin: 0 8px;
        height: 76px;
        -webkit-transition:all ease 0.25s;
        box-shadow: 0 4px 9px 0 rgba(213,218,224,.3);
    }

    button#message
    {
        width: 60px;
        height: 60px;
    }

    .tinder--buttons button:focus {
        outline: 0;
    }

    .tinder--buttons i {
        font-size: 32px;
        vertical-align: middle;
    }

    #nope:hover
    {

        background-color: red;
        color: #fff;

    }

    #love:hover
    {
        background-color:green;
        color: #fff;
    }

    button:hover
    {
        cursor: pointer

    }

    .avatar
    {
        border-radius: 250px;
        width: 40px;
        height: 40px;
        margin-right: 25px;
        border: 2px #fff solid;
    }

    .loading-icon-bounce
    {
        font-size: 62px;
        top: 50%;
        position: absolute;
        background-color: #fff;
        color: #000;
        border-radius: 250px;
        padding: 25px;
        box-shadow: 5px 5px 20px rgba(0, 0, 0, 0.2)  ;
        margin-left: -56px;
        margin-top: -56px;
    }

    .page
    {
        display: none;
        -webkit-transition:all ease 0.25s;
    }

    .page.active
    {
        display: block !important;
    }
</style>

<!-- loading page... -->

<div id="loadingScreen" style="position: absolute; left: 0; top: 0; z-index: 9999; height: 100vh; width: 100%; background-image: linear-gradient(to right top, #2ecc71, #2cc46d, #2abd68, #29b564, #27ae60);">

    <div align="center"><i class="ti ti-thumb-up loading-icon-bounce"></i></div>

</div>
<!-- end of loading page.. -->


<!-- left -->
<div class="row">
    <div class="col-lg-3">


        <div class="menu">


            <div class="header">

                <img class="avatar" src="https://scontent.fcph2-1.fna.fbcdn.net/v/t1.0-1/p320x320/22688788_940261516125047_7704999875201936803_n.jpg?_nc_cat=0&oh=de523ad4c19104c01c9a2a02c5367455&oe=5B81AA0A">

                Min profil

            </div>

            <div class="content">

                <ul class="list-group">

                    <li class="list-group-item openPage active" pageToOpen="homePage"><span class="ti ti-thumb-up"></span> <span class="t"></span>
                        Go Or No Go</li>

                    <li class="list-group-item openPage" pageToOpen="notificationsPage"><span class="ti ti-world"></span> <span class="t"></span>
                        Notifikationer</li>

                    <li class="list-group-item openPage" pageToOpen="uploadPage"><span class="ti ti-upload"></span> <span class="t"></span> Upload</li>

                    <li class="list-group-item openPage" pageToOpen="signOutPage"><span class="ti ti-unlock"></span>
                        <span class="t"></span> Log ud</li>

                </ul>

            </div>

        </div>


    </div>

    <script>


        $( ".openPage" ).click(function() {

            var pageToOpen = $(this).attr('pageToOpen');

            if(pageToOpen === "signOutPage")
            {

                window.location.href="user/logout";

            }

            $(".page,.list-group-item").removeClass("active");

            $(this).addClass("active");


            $("." + pageToOpen).addClass('active');

            console.log("opening page..");

        });

    </script>


    <!-- cards.. -->


    <div class="col-lg-3"></div>

    <div class="col-lg-5">


        <!-- home page -->
        <div class="homePage page active">
            <div class="tinder">

                <div class="tinder--status">
                    <i class="fa fa-remove"></i>
                    <i class="fa fa-heart"></i>
                </div>

                <div class="tinder--cards"></div>

                <div class="tinder--buttons">
                    <button id="nope"><i class="ti ti-thumb-down"></i></button>

                    <button id="message" style="margin-left: 80px">

                        <img style="width: 32px;"
                             src="https://fthmb.tqn.com/fCx61nWTphsEivAiArZspnf67LU=/768x0/filters:no_upscale():max_bytes(150000):strip_icc()/Messenger_iOS_App_Icon_1024x1024-57e56f725f9b586c35d96f1e.png">

                    </button>

                    <button id="love"><i class="ti ti-thumb-up"></i></button>
                </div>
            </div>
        </div>
        <!-- end of home page -->

        <!-- notifications page -->
        <div class="notificationsPage page">

            <style>
                .beauty-box
                {
                    width: 100%;
                    margin-top: 200px;
                    background-color: #fff;
                    border-radius: 9px;
                    padding: 25px;
                    margin-left: -200px;
                    border: 2px #DFDFDF solid;
                }

                .full-w
                {
                    width: 100%;
                }
            </style>

            <div class="beauty-box">


                <div align="center">
                    <h1>Upload question</h1>
                    <hr>
                </div>

                <!-- form -->

                <form>
                    <div class="form-group">
                        <label for="file">Vælg billede</label>
                        <input type="file" class="form-control"
                               id="file" aria-describedby="emailHelp" placeholder="Enter email">
                    </div>

                    <div class="form-group">
                        <label for="file">Dit spørgsmål</label>
                        <textarea name="question" class="form-control"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary full-w">Upload</button>
                </form>


            </div>

        </div>


        <!-- upload page -->
        <div class="uploadPage page">


        </div>



    </div>

    <div class="col-lg-5"></div>

</div>


<script>


    //bounce for loading screen...
    function doBounce(element, times, distance, speed) {
        for(var i = 0; i < times; i++) {
            element.animate({marginTop: '-='+distance},speed)
                .animate({marginTop: '+='+distance},speed);
        }
    }

    var post_id = 0;

    function likeOrDisLike(type)
    {

        $.post( "/api/user/image/likeOrDislike?image_id=" + post_id + "&likeOrDislike=" + type)
        .done(function( data )
        {
            console.log(data);
        });

    }

    /**
     *
     *
     * Getting posts from rest-api.
     *
     */
    function getPosts()
    {

        $.getJSON( "/api/user/post", function( data )
        {

            $.each( data, function( key, val ) {
                console.log(val);

                $(".tinder--cards").append('<div class="tinder--card" post_id="30"> <img ' +
                    '' +
                    'src="https://scontent.fcph2-1.fna.fbcdn.net/v/t1.0-9/15420979_717908415025986_1766483365492221789_n.jpg?_nc_cat=0&oh=2d702ee79e480d3624813b14f979f6a0&oe=5B79276E"> <p>' + val.question + '</p> <hr> </div>')
            });

            tinderContainer = document.querySelector('.tinder');
            allCards = document.querySelectorAll('.tinder--card');

            initCards();

        });

    }

    /**
     *
     * When Dom is ready load this.
     *
     */
    $(function()
    {
        doBounce($(".loading-icon-bounce"), 100, '30px', 400);
        getPosts();


        setTimeout(function(){ $("#loadingScreen").fadeOut(); }, 2000);

    });



    //js for cards..
    var nope = document.getElementById('nope');
    var love = document.getElementById('love');

    var tinderContainer;
    var allCards;

    function initCards(card, index)
    {
        var newCards = document.querySelectorAll('.tinder--card:not(.removed)');

        var i  = 0;

        newCards.forEach(function (card, index)
        {

            if(i == 0)
            {

                //current post we're looking it.
                post_id = card.getAttribute("post_id");
                console.log(post_id);

            }

            card.style.zIndex = allCards.length - index;
            card.style.transform = 'scale(' + (20 - index) / 20 + ') translateY(-' + 30 * index + 'px)';
            card.style.opacity = (10 - index) / 10;

            i++;

        });

        tinderContainer.classList.add('loaded');


        allCards.forEach(function (el)
        {
            var hammertime = new Hammer(el);

            hammertime.on('pan', function (event) {
                el.classList.add('moving');
            });

            hammertime.on('pan', function (event) {
                if (event.deltaX === 0) return;
                if (event.center.x === 0 && event.center.y === 0) return;

                tinderContainer.classList.toggle('tinder_love', event.deltaX > 0);
                tinderContainer.classList.toggle('tinder_nope', event.deltaX < 0);

                var xMulti = event.deltaX * 0.03;
                var yMulti = event.deltaY / 80;
                var rotate = xMulti * yMulti;

                event.target.style.transform = 'translate(' + event.deltaX + 'px, ' + event.deltaY + 'px) rotate(' + rotate + 'deg)';
            });

            hammertime.on('panend', function (event) {
                el.classList.remove('moving');
                tinderContainer.classList.remove('tinder_love');
                tinderContainer.classList.remove('tinder_nope');

                var moveOutWidth = document.body.clientWidth;
                var keep = Math.abs(event.deltaX) < 80 || Math.abs(event.velocityX) < 0.5;

                event.target.classList.toggle('removed', !keep);

                if (keep) {
                    event.target.style.transform = '';
                } else {
                    var endX = Math.max(Math.abs(event.velocityX) * moveOutWidth, moveOutWidth);
                    var toX = event.deltaX > 0 ? endX : -endX;
                    var endY = Math.abs(event.velocityY) * moveOutWidth;
                    var toY = event.deltaY > 0 ? endY : -endY;
                    var xMulti = event.deltaX * 0.03;
                    var yMulti = event.deltaY / 80;
                    var rotate = xMulti * yMulti;

                    event.target.style.transform = 'translate(' + toX + 'px, ' + (toY + event.deltaY) + 'px) rotate(' + rotate + 'deg)';
                    initCards();
                }
            });
        });


    }



    function createButtonListener(love)
    {
        return function (event) {
            var cards = document.querySelectorAll('.tinder--card:not(.removed)');
            var moveOutWidth = document.body.clientWidth * 1.5;

            if (!cards.length) return false;

            var card = cards[0];

            card.classList.add('removed');

            if (love) {
                card.style.transform = 'translate(' + moveOutWidth + 'px, -100px) rotate(-30deg)';
                likeOrDisLike(1);
            } else {
                card.style.transform = 'translate(-' + moveOutWidth + 'px, -100px) rotate(30deg)';
                likeOrDisLike(0);
            }

            initCards();

            event.preventDefault();
        };
    }

    var nopeListener = createButtonListener(false);
    var loveListener = createButtonListener(true);

    nope.addEventListener('click', nopeListener);
    love.addEventListener('click', loveListener);



</script>

</body>
</html>